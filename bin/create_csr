#!/bin/sh

APP_NAME=cockpit

IP_ADDR=`hostname --ip-address | gawk '{print $2}'`

APP_DIR=/etc/pki/tls/$APP_NAME

rm -rf $APP_DIR

mkdir -p $APP_DIR/private

openssl req -new -sha256 -days 3650 \
	-newkey rsa:4096 \
	-subj "/C=JP/ST=Kanagawa/L=Yokohama/O=Personal/CN=$IP_ADDR" \
	-out $APP_DIR/$APP_NAME.csr -keyout $APP_DIR/private/$APP_NAME.key

openssl rsa -in $APP_DIR/private/$APP_NAME.key \
			-out $APP_DIR/private/$APP_NAME.key




